name: Flutter build for android
'on': pull_request
jobs:
 build:
   runs-on: windows-latest
   steps:
     - uses: actions/checkout@v3
     - uses: subosito/flutter-action@v2
       with:
         channel: 'beta'
     - run: flutter config --enable-windows-desktop
     - run: flutter gen-l10n --use-deferred-loading
     - run: flutter build apk
     - name: Push to release
       uses: ncipollo/release-action@v1
       with:
         artifacts: "build/android/"
         tag: v0.0.${{ github.run_number}}
         token: ${{ secrets.TOKEN}}